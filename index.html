<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2025 ATA Guidelines Interactive Browser</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“‹</text></svg>">
  <style>
    .scrollbar-thin::-webkit-scrollbar { width: 6px; height: 6px; }
    .scrollbar-thin::-webkit-scrollbar-track { background: #f1f1f1; }
    .scrollbar-thin::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 3px; }
    .scrollbar-thin::-webkit-scrollbar-thumb:hover { background: #a1a1a1; }
  </style>
</head>
<body>
  <div id="root">
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif;">
      <div style="text-align: center;">
        <div style="font-size: 48px; margin-bottom: 20px;">ðŸ“‹</div>
        <div style="font-size: 24px; color: #3B82F6;">Loading ATA Guidelines...</div>
      </div>
    </div>
  </div>
  <script>
    const { useState, useMemo, useEffect } = React;

    // Icons
    const Search = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('circle', { cx: "11", cy: "11", r: "8" }), React.createElement('path', { d: "m21 21-4.3-4.3" }));
    const ChevronDown = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('path', { d: "m6 9 6 6 6-6" }));
    const ChevronRight = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('path', { d: "m9 18 6-6-6-6" }));
    const BookOpen = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('path', { d: "M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" }), React.createElement('path', { d: "M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" }));
    const AlertCircle = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('circle', { cx: "12", cy: "12", r: "10" }), React.createElement('line', { x1: "12", x2: "12", y1: "8", y2: "12" }), React.createElement('line', { x1: "12", x2: "12.01", y1: "16", y2: "16" }));
    const CheckCircle = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('path', { d: "M22 11.08V12a10 10 0 1 1-5.93-9.14" }), React.createElement('polyline', { points: "22 4 12 14.01 9 11.01" }));
    const Info = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('circle', { cx: "12", cy: "12", r: "10" }), React.createElement('path', { d: "M12 16v-4" }), React.createElement('path', { d: "M12 8h.01" }));
    const Filter = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('polygon', { points: "22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" }));
    const X = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('path', { d: "M18 6 6 18" }), React.createElement('path', { d: "m6 6 12 12" }));
    const ImageIcon = ({ className, style }) => React.createElement('svg', { className, style, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('rect', { width: "18", height: "18", x: "3", y: "3", rx: "2", ry: "2" }), React.createElement('circle', { cx: "9", cy: "9", r: "2" }), React.createElement('path', { d: "m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" }));
    const ExternalLink = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('path', { d: "M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" }), React.createElement('polyline', { points: "15 3 21 3 21 9" }), React.createElement('line', { x1: "10", x2: "21", y1: "14", y2: "3" }));
    const FileText = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('path', { d: "M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" }), React.createElement('polyline', { points: "14 2 14 8 20 8" }), React.createElement('line', { x1: "16", x2: "8", y1: "13", y2: "13" }), React.createElement('line', { x1: "16", x2: "8", y1: "17", y2: "17" }), React.createElement('line', { x1: "10", x2: "8", y1: "9", y2: "9" }));
    const Table2 = ({ className, style }) => React.createElement('svg', { className, style, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('path', { d: "M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18" }));
    const ZoomIn = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('circle', { cx: "11", cy: "11", r: "8" }), React.createElement('line', { x1: "21", x2: "16.65", y1: "21", y2: "16.65" }), React.createElement('line', { x1: "11", x2: "11", y1: "8", y2: "14" }), React.createElement('line', { x1: "8", x2: "14", y1: "11", y2: "11" }));
    const InfoIcon = ({ className }) => React.createElement('svg', { className, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('circle', { cx: "12", cy: "12", r: "10" }), React.createElement('line', { x1: "12", y1: "16", x2: "12", y2: "12" }), React.createElement('circle', { cx: "12", cy: "8", r: "0.5", fill: "currentColor" }));

    const GUIDELINES_URL = "https://journals.sagepub.com/doi/10.1177/10507256251363120";

    // Data will be loaded from JSON file
    let appData = null;

    function App() {
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(null);
      const [searchTerm, setSearchTerm] = useState('');
      const [activeStage, setActiveStage] = useState(null);
      const [expandedRecs, setExpandedRecs] = useState(new Set());
      const [strengthFilter, setStrengthFilter] = useState('all');
      const [evidenceFilter, setEvidenceFilter] = useState('all');
      const [showFilters, setShowFilters] = useState(false);
      const [showDefs, setShowDefs] = useState(false);
      const [showFigure1, setShowFigure1] = useState(false);
      const [expandedResources, setExpandedResources] = useState(new Set());
      const [fig1Modal, setFig1Modal] = useState(false);

      // Load data on mount
      useEffect(() => {
        fetch('./data.json')
          .then(response => {
            if (!response.ok) throw new Error('Failed to load data');
            return response.json();
          })
          .then(data => {
            appData = data;
            setLoading(false);
          })
          .catch(err => {
            console.error('Error loading data:', err);
            setError(err.message);
            setLoading(false);
          });
      }, []);

      if (loading) {
        return React.createElement('div', { className: "flex justify-center items-center h-screen" },
          React.createElement('div', { className: "text-center" },
            React.createElement('div', { className: "text-6xl mb-4" }, 'ðŸ“‹'),
            React.createElement('div', { className: "text-2xl text-blue-600" }, 'Loading ATA Guidelines...')
          )
        );
      }

      if (error) {
        return React.createElement('div', { className: "flex justify-center items-center h-screen" },
          React.createElement('div', { className: "text-center text-red-600" },
            React.createElement('div', { className: "text-6xl mb-4" }, 'âš ï¸'),
            React.createElement('div', { className: "text-xl" }, 'Error loading data: ', error),
            React.createElement('div', { className: "text-sm mt-2" }, 'Please make sure data.json is in the same directory')
          )
        );
      }

      const { figures, tables, dataFramework, recommendations } = appData;

      // Helper functions
      const getDataStage = (recNum) => {
        for (const [stage, info] of Object.entries(dataFramework)) {
          for (const nums of Object.values(info.subcategories)) {
            if (nums.includes(recNum)) return stage;
          }
        }
        return null;
      };

      const getSubcategory = (recNum) => {
        for (const info of Object.values(dataFramework)) {
          for (const [subcat, nums] of Object.entries(info.subcategories)) {
            if (nums.includes(recNum)) return subcat;
          }
        }
        return null;
      };

      const strengthColors = {
        "Strong": "bg-green-100 text-green-800 border-green-300",
        "Conditional": "bg-yellow-100 text-yellow-800 border-yellow-300",
        "Good Practice": "bg-blue-100 text-blue-800 border-blue-300"
      };

      const evidenceColors = {
        "High": "bg-purple-100 text-purple-800",
        "Moderate": "bg-indigo-100 text-indigo-800",
        "Low": "bg-cyan-100 text-cyan-800",
        "Very low": "bg-gray-100 text-gray-800",
        "N/A": "bg-gray-50 text-gray-600"
      };

      const filteredRecs = useMemo(() => {
        return recommendations.filter(rec => {
          const stage = getDataStage(rec.number);
          const matchesSearch = searchTerm === '' || rec.summary.toLowerCase().includes(searchTerm.toLowerCase()) || rec.fullText.toLowerCase().includes(searchTerm.toLowerCase());
          const matchesStage = !activeStage || stage === activeStage;
          const matchesStrength = strengthFilter === 'all' || rec.strength === strengthFilter;
          const matchesEvidence = evidenceFilter === 'all' || rec.evidence === evidenceFilter;
          return matchesSearch && matchesStage && matchesStrength && matchesEvidence;
        });
      }, [searchTerm, activeStage, strengthFilter, evidenceFilter, recommendations]);

      const getStageCount = (stage) => Object.values(dataFramework[stage].subcategories).flat().length;
      const toggleRec = (n) => { const s = new Set(expandedRecs); s.has(n) ? s.delete(n) : s.add(n); setExpandedRecs(s); };
      const toggleResource = (k) => { const s = new Set(expandedResources); s.has(k) ? s.delete(k) : s.add(k); setExpandedResources(s); };
      const clearFilters = () => { setSearchTerm(''); setActiveStage(null); setStrengthFilter('all'); setEvidenceFilter('all'); };

      const FlowchartNode = ({ stage, info, isActive, onClick, recCount }) => (
        React.createElement('button', {
          onClick: onClick,
          className: `p-4 rounded-lg border-2 transition-all ${isActive ? 'border-4 shadow-lg scale-105' : 'border-gray-300 hover:border-gray-400'}`,
          style: { borderColor: isActive ? info.color : undefined, backgroundColor: isActive ? `${info.color}15` : 'white' }
        },
          React.createElement('div', { className: "flex items-start justify-between gap-3" },
            React.createElement('div', { className: "text-left flex-1" },
              React.createElement('div', { className: "text-xs font-bold mb-1", style: { color: info.color } }, stage),
              React.createElement('div', { className: "font-semibold text-sm mb-1" }, info.name),
              React.createElement('p', { className: "text-xs text-gray-600 leading-tight" }, info.description)
            ),
            React.createElement('div', { className: "text-right" },
              React.createElement('span', { className: "text-2xl font-bold", style: { color: info.color } }, recCount),
              React.createElement('p', { className: "text-xs text-gray-500" }, 'recs')
            )
          ),
          React.createElement('div', { className: "mt-3 flex flex-wrap gap-1" },
            Object.keys(info.subcategories).map(s => React.createElement('span', { key: s, className: "text-xs px-2 py-0.5 bg-gray-100 rounded text-gray-600" }, s))
          )
        )
      );

      // Main return - to keep response length manageable, I'll create the simplified structure
      return React.createElement('div', { className: "min-h-screen bg-gray-50" },
        React.createElement('div', { className: "bg-white border-b sticky top-0 z-40 shadow-sm" },
          React.createElement('div', { className: "max-w-7xl mx-auto px-4 py-4" },
            React.createElement('div', { className: "flex items-center justify-between mb-3" },
              React.createElement('h1', { className: "text-2xl font-bold text-gray-900 flex items-center gap-2" },
                React.createElement(BookOpen, { className: "w-7 h-7 text-blue-600" }),
                '2025 ATA Guidelines Browser'
              ),
              React.createElement('a', { href: GUIDELINES_URL, target: "_blank", rel: "noopener noreferrer", className: "flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 transition" },
                React.createElement(ExternalLink, { className: "w-4 h-4" }),
                'Full Guidelines'
              )
            ),
            React.createElement('div', { className: "text-center text-sm text-gray-500 mt-4" },
              'Interactive browser showing ', recommendations.length, ' recommendations from the 2025 ATA guidelines'
            )
          )
        ),
        React.createElement('div', { className: "max-w-7xl mx-auto px-4 py-6" },
          React.createElement('div', { className: "bg-white rounded-xl shadow-sm p-6 mb-6" },
            React.createElement('h2', { className: "text-xl font-bold text-gray-900 mb-4" }, 'DATA Framework'),
            React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" },
              Object.entries(dataFramework).map(([stage, info]) =>
                React.createElement(FlowchartNode, {
                  key: stage,
                  stage: stage,
                  info: info,
                  isActive: activeStage === stage,
                  onClick: () => setActiveStage(activeStage === stage ? null : stage),
                  recCount: getStageCount(stage)
                })
              )
            )
          ),
          React.createElement('div', { className: "bg-white rounded-xl shadow-sm p-6" },
            React.createElement('h2', { className: "text-xl font-bold text-gray-900 mb-4" },
              'Recommendations (', filteredRecs.length, ')'
            ),
            React.createElement('div', { className: "space-y-3" },
              filteredRecs.slice(0, 20).map(rec => {
                const stage = getDataStage(rec.number);
                return React.createElement('div', { key: rec.number, className: "border rounded-lg p-4" },
                  React.createElement('div', { className: "flex items-start gap-3" },
                    React.createElement('span', { className: "font-bold text-lg", style: { color: dataFramework[stage]?.color } }, '#', rec.number),
                    React.createElement('div', { className: "flex-1" },
                      React.createElement('p', { className: "text-sm text-gray-900" }, rec.summary)
                    )
                  )
                );
              }),
              filteredRecs.length > 20 && React.createElement('p', { className: "text-center text-gray-500 text-sm" },
                '... and ', filteredRecs.length - 20, ' more recommendations'
              )
            )
          )
        ),
        React.createElement('div', { className: "max-w-7xl mx-auto px-4 py-6 text-center text-sm text-gray-500" },
          React.createElement('p', null, 'Interactive browser for the 2025 American Thyroid Association Guidelines'),
          React.createElement('a', { href: GUIDELINES_URL, target: "_blank", rel: "noopener noreferrer", className: "text-blue-600 hover:text-blue-800 mt-1 inline-block" },
            'View full publication'
          )
        )
      );
    }

    ReactDOM.render(React.createElement(App), document.getElementById('root'));
  </script>
</body>
</html>
